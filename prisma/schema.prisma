generator client {
  provider = "prisma-client-js"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Product {
  id String @id @default(cuid())
  
  type Type
  
  images String[]
  title String
  price Float
  description String
  colors String[]
  sizes String[]
  
  slug String @unique
  
  gender Gender?
  category Category
  
  material String
  fit String
  care String
  origin String
  
  createdAt DateTime @default(now())
  
  wishlists Wishlist[]
}

enum Type {
  APPAREL
  ACCESSORIES
  NUTRITION
}

enum Gender {
  MEN
  WOMEN
}

enum Category {
  TSHIRT
  TANK
  HOODIE
  SWEATSHIRT
  JOGGERS
  SHORTS
  COMPRESSION
  LEGGINGS
  OUTERWEAR
  SEAMLESS
  OVERSIZE
  TRAINING
  RUNNING
  POWERLIFTING
  CROSSFIT
  RECOVERY
  SPORT_BRA
  CROP
  HIGHWAIST
  GYM_SET
  YOGA
  BAG
  GLOVES
  STRAPS
  WRAPS
  BELT
  SHAKER
  BOTTLE
  CAP
  BEANIE
  TOWEL
  WATCH
  SOCKS
  KNEE_SLEEVES
  WRIST_SLEEVES
  BACKPACK
  ESSENTIAL
  PROTEIN
  WHEY
  ISOLATE
  CASEIN
  BCAA
  EAA
  PREWORKOUT
  FATBURNER
  VITAMINS
  TESTOSTERONE
  CREATINE
  ENERGY
  WEIGHT_GAINER
  SHRED
  HEALTH
  SUPPLEMENT
}

model User {
  id String @id @default(cuid())

  email String @unique
  password String
  role Role

  avatar String
  firstName String
  lastName String

  address String?

  paymentMethod String?

  wishlist Wishlist[]
  orders Order[]
}

enum Role {
  USER
  ADMIN
}

model Wishlist {
  id String @id @default(cuid())

  userId String
  productId String

  createdAt DateTime @default(now())

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
  product Product @relation(fields: [productId], references: [id], onDelete: Cascade)

  @@unique([userId, productId])
}

model Order {
  id String @id @default(cuid())
  
  userId String
  
  status OrderStatus @default(PENDING)
  total Float

  createdAt DateTime @default(now())
  
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  items OrderItem[]
}

model OrderItem {
  id String @id @default(cuid())

  orderId  String
  productId String

  quantity Int

  title String
  price Float
  image String

  order Order @relation(fields: [orderId], references: [id], onDelete: Cascade)
}

enum OrderStatus {
  PENDING
  PAID
  SHIPPED
  DELIVERED
  CANCELLED
}